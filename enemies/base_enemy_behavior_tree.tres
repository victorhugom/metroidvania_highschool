[gd_resource type="BehaviorTree" load_steps=36 format=3 uid="uid://cr6n7sschkx3f"]

[ext_resource type="Script" path="res://ai/tasks/taks_find_roam_position.gd" id="1_66w5h"]
[ext_resource type="Script" path="res://ai/tasks/task_look_for_player.gd" id="1_yk8su"]
[ext_resource type="Script" path="res://ai/tasks/task_move_torwards_node.gd" id="2_3urkf"]
[ext_resource type="Script" path="res://ai/tasks/task_check_distance.gd" id="2_kgp36"]
[ext_resource type="Script" path="res://ai/tasks/task_move_torwards_position.gd" id="2_llgg2"]
[ext_resource type="Script" path="res://ai/tasks/task_base_enemy_swing_bat.gd" id="3_ilgoi"]
[ext_resource type="Script" path="res://ai/tasks/taks_stop.gd" id="3_jp1vo"]
[ext_resource type="Script" path="res://ai/tasks/task_base_enemy_combo_attack.gd" id="4_0b6h6"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_paedr"]
var/roam_position/name = &"roam_position"
var/roam_position/type = 5
var/roam_position/value = Vector2(0, 0)
var/roam_position/hint = 0
var/roam_position/hint_string = ""
var/target_player/name = &"target_player"
var/target_player/type = 24
var/target_player/hint = 0
var/target_player/hint_string = ""

[sub_resource type="BTAction" id="BTAction_jow58"]
script = ExtResource("1_yk8su")
target_player_var = "target_player"
detection_range = 200

[sub_resource type="BTAction" id="BTAction_sq7io"]
script = ExtResource("3_jp1vo")

[sub_resource type="BTSequence" id="BTSequence_5wci6"]
custom_name = "Sequence: Look For Player"
children = [SubResource("BTAction_jow58"), SubResource("BTAction_sq7io")]

[sub_resource type="BBVariant" id="BBVariant_8gu5v"]
saved_value = null
resource_name = "<null>"

[sub_resource type="BTCheckVar" id="BTCheckVar_2inbc"]
variable = &"target_player"
check_type = 5
value = SubResource("BBVariant_8gu5v")

[sub_resource type="BTAction" id="BTAction_8ug22"]
script = ExtResource("2_kgp36")
tagert_node_var = "target_player"
more_than_distance = 0
less_than_distance = 20

[sub_resource type="BTAction" id="BTAction_xvxob"]
script = ExtResource("3_ilgoi")

[sub_resource type="BTRandomWait" id="BTRandomWait_qgodb"]

[sub_resource type="BTSequence" id="BTSequence_5axlp"]
custom_name = "Sequence: Attack"
children = [SubResource("BTAction_8ug22"), SubResource("BTAction_xvxob"), SubResource("BTRandomWait_qgodb")]

[sub_resource type="BTAction" id="BTAction_5ihsn"]
script = ExtResource("2_kgp36")
tagert_node_var = "target_player"
more_than_distance = 0
less_than_distance = 40

[sub_resource type="BTAction" id="BTAction_xkjnv"]
script = ExtResource("4_0b6h6")

[sub_resource type="BTRandomWait" id="BTRandomWait_0yqlo"]
min_duration = 2.0
max_duration = 3.0

[sub_resource type="BTSequence" id="BTSequence_gs17j"]
custom_name = "Sequence: Combo Attack"
children = [SubResource("BTAction_5ihsn"), SubResource("BTAction_xkjnv"), SubResource("BTRandomWait_0yqlo")]

[sub_resource type="BTSelector" id="BTSelector_qkqor"]
children = [SubResource("BTSequence_5axlp"), SubResource("BTSequence_gs17j")]

[sub_resource type="BTSequence" id="BTSequence_ttrdq"]
custom_name = "Sequence: Handle Attack"
children = [SubResource("BTCheckVar_2inbc"), SubResource("BTSelector_qkqor")]

[sub_resource type="BTAction" id="BTAction_dndn3"]
script = ExtResource("2_3urkf")
target_node_var = "target_player"
tolerance = 10

[sub_resource type="BTSequence" id="BTSequence_212q4"]
custom_name = "Sequence: Move Torwards Player"
children = [SubResource("BTAction_dndn3")]

[sub_resource type="BTDynamicSelector" id="BTDynamicSelector_hsxeh"]
children = [SubResource("BTSequence_ttrdq"), SubResource("BTSequence_212q4")]

[sub_resource type="BTDynamicSequence" id="BTDynamicSequence_qjgyi"]
custom_name = "Sequence (Engage Player)"
children = [SubResource("BTSequence_5wci6"), SubResource("BTDynamicSelector_hsxeh")]

[sub_resource type="BBVariant" id="BBVariant_rdgjo"]
saved_value = null
resource_name = "<null>"

[sub_resource type="BTCheckVar" id="BTCheckVar_fsrlj"]
variable = &"target_player"
value = SubResource("BBVariant_rdgjo")

[sub_resource type="BTAction" id="BTAction_ognob"]
script = ExtResource("1_66w5h")
roam_min_radius = 128.0
roam_max_radius = 256.0
roam_position_var = &"roam_position"

[sub_resource type="BTAction" id="BTAction_7aq3u"]
script = ExtResource("2_llgg2")
tolerance = 10
target_position_var = "roam_position"

[sub_resource type="BTRandomWait" id="BTRandomWait_45nid"]

[sub_resource type="BTSequence" id="BTSequence_tve3w"]
custom_name = "Sequence: Roam"
children = [SubResource("BTCheckVar_fsrlj"), SubResource("BTAction_ognob"), SubResource("BTAction_7aq3u"), SubResource("BTRandomWait_45nid")]

[sub_resource type="BTDynamicSelector" id="BTDynamicSelector_74cf8"]
children = [SubResource("BTDynamicSequence_qjgyi"), SubResource("BTSequence_tve3w")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_paedr")
root_task = SubResource("BTDynamicSelector_74cf8")
